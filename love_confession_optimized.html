<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>爱心表白</title>
    <link href="https://fonts.googleapis.com/css2?family=Zhi+Mang+Xing&family=Noto+Serif+SC:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #ffe6f2; /* 默认背景色 */
            font-family: 'Noto Serif SC', 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            transition: background-color 1s ease; /* 背景颜色过渡效果 */
            cursor: pointer; /* 显示点击手势 */
            position: relative; /* 为光晕层提供定位上下文 */
        }

        .container {
            text-align: center;
            position: relative;
            z-index: 2;
            padding: 20px;
            background: rgba(255, 255, 255, 0.85); /* 半透明白色背景 */
            border-radius: 20px; /* 圆角 */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15); /* 更柔和的阴影 */
            backdrop-filter: blur(10px); /* 毛玻璃效果 */
            max-width: 90%; /* 限制最大宽度 */
            margin: 50px auto; /* 居中显示并留出空间 */
        }

        .heart {
            position: relative;
            width: 150px; /* 减小心形尺寸以适应移动设备 */
            height: 135px;
            margin: 0 auto 20px;
            animation: heartbeat 1.5s infinite; /* 修正拼写错误 */
        }

        .heart:before,
        .heart:after {
            content: "";
            position: absolute;
            width: 75px;
            height: 120px;
            background: var(--heart-color, #ff66a3);
            border-radius: 100px 100px 0 0;
        }

        .heart:before {
            left: 75px;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }

        .heart:after {
            right: 75px;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }

        .message {
            color: #d63384;
            font-size: 24px; /* 调整字体大小 */
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1); /* 加强阴影效果 */
        }

        .confession {
            background: rgba(255, 255, 255, 0.9); /* 更透明白色背景 */
            padding: 20px; /* 调整内边距 */
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-width: 100%;
            margin: 0 auto;
        }

        .confession p {
            font-size: 16px; /* 调整字体大小 */
            line-height: 1.6; /* 调整行高 */
            color: #555;
            margin: 10px 0; /* 调整段落间距 */
        }

        .signature {
            margin-top: 20px;
            font-style: italic;
            color: #ff66a3;
            font-size: 18px; /* 调整签名字体大小 */
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            10% { transform: scale(1.05); }
            20% { transform: scale(1); }
            30% { transform: scale(1.1); }
            40% { transform: scale(1); }
            50% { transform: scale(1.05); }
            60% { transform: scale(1); }
            100% { transform: scale(1); }
        }

        .hearts-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-heart {
            position: absolute;
            color: #ff66a3;
            font-size: 20px;
            opacity: 0;
            animation: float 5s infinite ease-in;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 0.5;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* 星星闪烁效果 */
        .stars-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle var(--duration, 3s) infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }

        /* 彩带飘落效果 */
        .ribbons-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .ribbon {
            position: absolute;
            width: 10px;
            height: 30px;
            opacity: 0.7;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* 花瓣飘落效果 */
        .petals-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .petal {
            position: absolute;
            width: 20px;
            height: 20px;
            background: linear-gradient(45deg, #ffafbd, #ffc3a0);
            border-radius: 50% 0;
            opacity: 0.8;
            animation: fallPetal linear infinite;
            transform-origin: center;
        }

        @keyframes fallPetal {
            0% {
                transform: translateY(-20px) rotate(0deg);
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* 云朵飘动效果 */
        .clouds-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            opacity: 0.7;
            animation: floatCloud linear infinite;
        }

        @keyframes floatCloud {
            0% {
                transform: translateX(-100px);
            }
            100% {
                transform: translateX(calc(100vw + 100px));
            }
        }

        /* 粒子效果样式 */
        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            z-index: 1000;
        }

        /* 链接样式 */
        .link-container {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .link-text {
            font-size: 16px;
            color: #d63384;
            margin-bottom: 10px;
        }

        .link-url {
            font-size: 14px;
            color: #666;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            word-break: break-all;
        }

        /* 提示文字样式 */
        .tip {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 14px;
            opacity: 0.7;
            z-index: 100;
        }

        /* 底部功能按钮区域 */
        .button-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100;
        }

        .action-button {
            background: linear-gradient(45deg, #ff66a3, #ff99cc);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 30px;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(255, 102, 163, 0.3);
            transition: all 0.3s ease;
            min-width: 100px;
            /* 添加玻璃效果 */
            backdrop-filter: blur(10px);
            background: linear-gradient(135deg, rgba(255, 102, 163, 0.8), rgba(255, 153, 204, 0.8));
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: absolute;
            animation: floatButton 6s infinite ease-in-out;
        }

        /* 按钮浮动动画 */
        @keyframes floatButton {
            0% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-10px) translateX(5px); }
            50% { transform: translateY(-5px) translateX(-5px); }
            75% { transform: translateY(-15px) translateX(5px); }
            100% { transform: translateY(0) translateX(0); }
        }

        /* 为每个按钮设置不同的动画延迟 */
        .action-button:nth-child(1) { animation-delay: 0s; }
        .action-button:nth-child(2) { animation-delay: 0.2s; }
        .action-button:nth-child(3) { animation-delay: 0.4s; }
        .action-button:nth-child(4) { animation-delay: 0.6s; }
        .action-button:nth-child(5) { animation-delay: 0.8s; }
        .action-button:nth-child(6) { animation-delay: 1.0s; }
        .action-button:nth-child(7) { animation-delay: 1.2s; }
        .action-button:nth-child(8) { animation-delay: 1.4s; }
        .action-button:nth-child(9) { animation-delay: 1.6s; }
        .action-button:nth-child(10) { animation-delay: 1.8s; }
        .action-button:nth-child(11) { animation-delay: 2.0s; }
        .action-button:nth-child(12) { animation-delay: 2.2s; }
        .action-button:nth-child(13) { animation-delay: 2.4s; }
        .action-button:nth-child(14) { animation-delay: 2.6s; }
        .action-button:nth-child(15) { animation-delay: 2.8s; }
        .action-button:nth-child(16) { animation-delay: 3.0s; }
        .action-button:nth-child(17) { animation-delay: 3.2s; }
        .action-button:nth-child(18) { animation-delay: 3.4s; }
        .action-button:nth-child(19) { animation-delay: 3.6s; }
        .action-button:nth-child(20) { animation-delay: 3.8s; }
        .action-button:nth-child(21) { animation-delay: 4.0s; }
        .action-button:nth-child(22) { animation-delay: 4.2s; }
        .action-button:nth-child(23) { animation-delay: 4.4s; }

        .action-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(255, 102, 163, 0.4);
            background: linear-gradient(135deg, rgba(255, 102, 163, 0.9), rgba(255, 153, 204, 0.9));
        }

        .action-button:active {
            transform: translateY(1px);
        }

        /* 甜蜜语句弹窗样式 */
        .sweet-message-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 10000;
            text-align: center;
            max-width: 80%;
            opacity: 0;
            animation: popupFadeIn 0.3s forwards;
        }

        @keyframes popupFadeIn {
            to { 
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .sweet-message-popup p {
            font-size: 24px;
            color: #d63384;
            margin: 0;
            font-weight: bold;
            font-family: 'Zhi Mang Xing', cursive;
            line-height: 1.4;
        }

        .close-popup {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #ff66a3;
        }

        /* 烟花特效容器 */
        .fireworks-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        /* 增强烟花粒子效果 */
        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            z-index: 1000;
            box-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                border-radius: 15px;
            }
            
            .heart {
                width: 120px;
                height: 108px;
            }
            
            .heart:before,
            .heart:after {
                width: 60px;
                height: 96px;
            }
            
            .heart:before {
                left: 60px;
            }
            
            .heart:after {
                right: 60px;
            }
            
            .message {
                font-size: 20px;
            }
            
            .confession {
                padding: 15px;
            }
            
            .confession p {
                font-size: 14px;
            }
            
            .signature {
                font-size: 16px;
            }
            
            .action-button {
                padding: 8px 12px;
                font-size: 12px;
                min-width: 80px;
            }
            
            .sweet-message-popup {
                padding: 15px;
            }
            
            .sweet-message-popup p {
                font-size: 16px;
            }
            
            .tip {
                font-size: 12px;
                padding: 8px 12px;
                bottom: 10px;
                right: 10px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .heart {
                width: 100px;
                height: 90px;
            }
            
            .heart:before,
            .heart:after {
                width: 50px;
                height: 80px;
            }
            
            .heart:before {
                left: 50px;
            }
            
            .heart:after {
                right: 50px;
            }
            
            .message {
                font-size: 18px;
            }
            
            .confession p {
                font-size: 13px;
            }
            
            .signature {
                font-size: 14px;
            }
            
            .action-button {
                padding: 6px 10px;
                font-size: 11px;
                min-width: 70px;
            }
            
            .sweet-message-popup p {
                font-size: 14px;
            }
        }

        /* 全屏光晕层 */
        .cursor-glow {
            position: fixed;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: radial-gradient(
                circle at center,
                rgba(255, 102, 163, 0.8) 0%,
                rgba(153, 102, 255, 0.6) 50%,
                rgba(102, 204, 255, 0.4) 100%
            );
            filter: blur(100px);
            mix-blend-mode: screen;
            pointer-events: none;
            z-index: 0;
            transform: translate3d(-50%, -50%, 0);
            transition: transform 0.1s ease-out;
        }

        /* 弹窗遮罩 */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: 9999;
            display: none;
        }
    </style>
</head>
<body>
    <!-- 全屏光晕层 -->
    <div class="cursor-glow" id="cursorGlow"></div>
    
    <div class="stars-bg" id="starsBackground"></div>
    <div class="ribbons-bg" id="ribbonsBackground"></div>
    <div class="hearts-bg" id="heartsBackground"></div>
    <div class="petals-bg" id="petalsBackground"></div>
    <div class="clouds-bg" id="cloudsBackground"></div>
    
    <div class="container">
        <div class="heart"></div>
        
        <div class="message">致我最爱的人</div>
        
        <div class="confession">
            <p>从遇见你的那一刻起，我的世界就变得不一样了。</p>
            <p>你的笑容如阳光般温暖，照亮了我心中的每一个角落。</p>
            <p>我想对你说：姜博是刘冬生命中最美好的奇迹。</p>
            <p>愿我们携手走过每一个春夏秋冬，直到永远。</p>
            
            <div class="signature">—— 永远爱你的人</div>
        </div>

        <div class="link-container">
            <div class="link-text">分享这个表白页面：</div>
            <div class="link-url" id="shareLink">正在生成链接...</div>
        </div>
    </div>

    <!-- 底部功能按钮 -->
    <div class="button-container">
        <button class="action-button" id="missYouBtn">💖 想你</button>
        <button class="action-button" id="coaxBtn">😡 哄哄模式</button>
        <button class="action-button" id="complimentBtn">🌸 夸夸你</button>
        <button class="action-button" id="whisperBtn">🥺 撒娇</button>
        <button class="action-button" id="dateBtn">📅 约会提议</button>
        <button class="action-button" id="promiseBtn">💍 认真一点</button>
        <button class="action-button" id="memoryBtn">📸 回忆瞬间</button>
        <button class="action-button" id="vowBtn">📜 小誓言</button>
        <button class="action-button" id="goodnightBtn">🌙 晚安情话</button>
        <button class="action-button" id="nextSongBtn">🎵 下一首</button>
        <button class="action-button" id="muteBtn">🔇 静音</button>
        <button class="action-button" id="fireworksBtn">🎆 放烟花</button>
        <button class="action-button" id="randomMsgBtn">💌 随机情话</button>
        <button class="action-button" id="hugBtn">🫶 抱抱我</button>
        <button class="action-button" id="drinkBtn">🥤 多喝水</button>
        <button class="action-button" id="kissBtn">💋 亲亲你</button>
        <button class="action-button" id="movieBtn">🎬 一起看电影</button>
        <button class="action-button" id="travelBtn">✈️ 去旅行</button>
        <button class="action-button" id="giftBtn">🎁 送礼物</button>
        <button class="action-button" id="futureBtn">🔮 展望未来</button>
        <button class="action-button" id="playMusicBtn">🎵 播放音乐</button>
        <button class="action-button" id="changeHeartBtn">❤️ 切换心形</button>
    </div>

    <!-- 弹窗遮罩 -->
    <div class="popup-overlay" id="popupOverlay"></div>

    <!-- 甜蜜语句弹窗 -->
    <div class="sweet-message-popup" id="sweetMessagePopup" style="display: none;">
        <span class="close-popup" id="closePopup">&times;</span>
        <p id="sweetMessageText">我喜欢你！</p>
    </div>

    <!-- 烟花特效容器 -->
    <div class="fireworks-container" id="fireworksContainer"></div>

    <!-- 音频元素 -->
    <audio id="backgroundMusic" loop>
        <source src="https://music.163.com/song/media/outer/url?id=139774.mp3" type="audio/mpeg">
        您的浏览器不支持音频元素。
    </audio>

    <!-- 提示文字 -->
    <div class="tip">点击页面任意位置切换背景颜色</div>

    <script>
        // 定义淡色系背景颜色数组
        const backgroundColors = [
            '#ffe6f2', // 淡粉色
            '#e6f2ff', // 淡蓝色
            '#f2e6ff', // 浅紫色
            '#fff2e6', // 淡橙色
            '#e6fff2', // 淡绿色
            '#fff8e6', // 淡黄色
            '#f2e6ff', // 浅紫色
            '#e6f7ff'  // 淡青色
        ];

        // 对应背景颜色的粒子颜色数组
        const particleColors = [
            ['#ff66a3', '#ff99cc', '#ff6699', '#ff3399', '#ff0066'], // 淡粉色对应的粒子颜色
            ['#66a3ff', '#99ccff', '#6699ff', '#3399ff', '#0066ff'], // 淡蓝色对应的粒子颜色
            ['#a366ff', '#cc99ff', '#9966ff', '#9933ff', '#6600ff'], // 浅紫色对应的粒子颜色
            ['#ff9966', '#ffcc99', '#ff9933', '#ff6600', '#cc6600'], // 淡橙色对应的粒子颜色
            ['#66cc99', '#99ffcc', '#66cc66', '#33cc99', '#009966'], // 淡绿色对应的粒子颜色
            ['#ffcc66', '#ffdd99', '#ffcc33', '#ff9900', '#cc9900'], // 淡黄色对应的粒子颜色
            ['#a366ff', '#cc99ff', '#9966ff', '#9933ff', '#6600ff'], // 浅紫色对应的粒子颜色
            ['#66cccc', '#99dddd', '#66cccc', '#33bbbb', '#009999']  // 淡青色对应的粒子颜色
        ];

        let currentColorIndex = 0;

        // 自动切换背景颜色（每10秒切换一次）
        setInterval(() => {
            currentColorIndex = (currentColorIndex + 1) % backgroundColors.length;
            document.body.style.background = backgroundColors[currentColorIndex];
        }, 10000);

        // 创建漂浮的心形背景
        function createFloatingHearts() {
            const heartsContainer = document.getElementById('heartsBackground');
            const heartSymbols = ['❤', '💖', '💗', '💓', '💕', '💘', '💝'];
            
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.innerHTML = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
                
                // 随机位置和大小
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
                heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
                heart.style.opacity = Math.random() * 0.5 + 0.3;
                
                heartsContainer.appendChild(heart);
                
                // 移除已经飘走的心
                setTimeout(() => {
                    heart.remove();
                }, 5000);
            }, 300);
        }

        // 创建闪烁的星星背景
        function createStars() {
            const starsContainer = document.getElementById('starsBackground');
            
            // 创建50颗星星
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                // 随机位置、大小和动画延迟
                star.style.left = Math.random() * 100 + 'vw';
                star.style.top = Math.random() * 100 + 'vh';
                star.style.width = (Math.random() * 3 + 1) + 'px';
                star.style.height = star.style.width;
                star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
                star.style.animationDelay = (Math.random() * 5) + 's';
                
                starsContainer.appendChild(star);
            }
        }

        // 创建飘落的彩带背景
        function createRibbons() {
            const ribbonsContainer = document.getElementById('ribbonsBackground');
            const ribbonColors = ['#ff66a3', '#66a3ff', '#a366ff', '#ff9966', '#66cc99'];
            
            setInterval(() => {
                const ribbon = document.createElement('div');
                ribbon.className = 'ribbon';
                
                // 随机颜色、位置和动画
                ribbon.style.backgroundColor = ribbonColors[Math.floor(Math.random() * ribbonColors.length)];
                ribbon.style.left = Math.random() * 100 + 'vw';
                ribbon.style.animationDuration = (Math.random() * 5 + 5) + 's';
                ribbon.style.opacity = Math.random() * 0.5 + 0.3;
                ribbon.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                ribbonsContainer.appendChild(ribbon);
                
                // 移除已经飘落的彩带
                setTimeout(() => {
                    ribbon.remove();
                }, 10000);
            }, 200);
        }

        // 创建飘落的花瓣背景
        function createPetals() {
            const petalsContainer = document.getElementById('petalsBackground');
            
            setInterval(() => {
                const petal = document.createElement('div');
                petal.className = 'petal';
                
                // 随机位置和动画
                petal.style.left = Math.random() * 100 + 'vw';
                petal.style.animationDuration = (Math.random() * 10 + 10) + 's';
                petal.style.opacity = Math.random() * 0.7 + 0.3;
                petal.style.width = (Math.random() * 15 + 10) + 'px';
                petal.style.height = petal.style.width;
                
                petalsContainer.appendChild(petal);
                
                // 移除已经飘落的花瓣
                setTimeout(() => {
                    petal.remove();
                }, 20000);
            }, 300);
        }

        // 创建飘动的云朵背景
        function createClouds() {
            const cloudsContainer = document.getElementById('cloudsBackground');
            
            setInterval(() => {
                const cloud = document.createElement('div');
                cloud.className = 'cloud';
                
                // 随机大小、位置和动画
                const size = Math.random() * 60 + 40;
                cloud.style.width = size + 'px';
                cloud.style.height = size / 2 + 'px';
                cloud.style.top = Math.random() * 50 + 'vh';
                cloud.style.animationDuration = (Math.random() * 20 + 20) + 's';
                cloud.style.opacity = Math.random() * 0.4 + 0.3;
                
                cloudsContainer.appendChild(cloud);
                
                // 移除已经飘过的云朵
                setTimeout(() => {
                    cloud.remove();
                }, 40000);
            }, 2000);
        }

        // 创建跟随鼠标的粒子效果
        function createParticleEffect() {
            let particles = [];
            
            document.addEventListener('mousemove', (e) => {
                // 获取当前背景对应的粒子颜色
                const colors = particleColors[currentColorIndex];
                
                // 创建新粒子
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = e.pageX + 'px';
                particle.style.top = e.pageY + 'px';
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                particle.style.opacity = '1';
                
                document.body.appendChild(particle);
                
                // 添加到粒子数组
                particles.push({
                    element: particle,
                    x: e.pageX,
                    y: e.pageY,
                    size: Math.random() * 5 + 2,
                    speedX: Math.random() * 4 - 2,
                    speedY: Math.random() * 4 - 2,
                    life: 100
                });
                
                // 限制粒子数量
                if (particles.length > 100) {
                    const oldParticle = particles.shift();
                    if (oldParticle.element.parentNode) {
                        oldParticle.element.parentNode.removeChild(oldParticle.element);
                    }
                }
            });
            
            // 动画循环
            function animateParticles() {
                for (let i = 0; i < particles.length; i++) {
                    const p = particles[i];
                    
                    // 更新位置
                    p.x += p.speedX;
                    p.y += p.speedY;
                    p.life -= 1;
                    
                    // 更新样式
                    p.element.style.left = p.x + 'px';
                    p.element.style.top = p.y + 'px';
                    p.element.style.opacity = p.life / 100;
                    p.element.style.transform = `scale(${p.life / 100})`;
                    
                    // 移除死亡粒子
                    if (p.life <= 0) {
                        if (p.element.parentNode) {
                            p.element.parentNode.removeChild(p.element);
                        }
                        particles.splice(i, 1);
                        i--;
                    }
                }
                
                requestAnimationFrame(animateParticles);
            }
            
            animateParticles();
        }

        // 创建烟花特效
        function createFireworks(x, y) {
            const container = document.getElementById('fireworksContainer');
            const colors = particleColors[currentColorIndex]; // 使用当前背景对应的粒子颜色
            
            // 创建更多烟花粒子，使烟花更大更明显
            for (let i = 0; i < 200; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                const color = colors[Math.floor(Math.random() * colors.length)];
                particle.style.backgroundColor = color;
                particle.style.color = color; // 用于阴影效果
                particle.style.opacity = '1';
                particle.style.width = (Math.random() * 8 + 4) + 'px';
                particle.style.height = particle.style.width;
                
                container.appendChild(particle);
                
                // 随机运动方向和速度
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 10 + 5;
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;
                
                // 动画效果
                let posX = x;
                let posY = y;
                let life = 200;
                let gravity = 0.1;
                let vyGravity = vy;
                
                function animate() {
                    life -= 1;
                    if (life <= 0) {
                        particle.remove();
                        return;
                    }
                    
                    posX += vx;
                    vyGravity += gravity;
                    posY += vyGravity;
                    
                    particle.style.left = posX + 'px';
                    particle.style.top = posY + 'px';
                    particle.style.opacity = life / 200;
                    particle.style.transform = `scale(${life / 200})`;
                    
                    requestAnimationFrame(animate);
                }
                
                animate();
            }
        }

        // 生成分享链接
        function generateShareLink() {
            // 在实际部署时，这里应该是实际的URL
            const shareLink = window.location.href;
            document.getElementById('shareLink').textContent = shareLink || '请将此文件部署到服务器获取链接';
        }

        // 分类文字池
        const cuteWhisper = [
            "人家真的好喜欢你呀~",
            "你今天有没有想我一点点？",
            "哼，不理你了！除非你夸我好看~",
            "我要抱抱，还要亲亲，不然我不开心了！",
            "你怎么这么晚才来找我，我都等好久啦~",
            "你是不是偷偷去撩别人了？快交代！",
            "讨厌啦，明明是你先招惹我的！",
            "我的心已经被你偷走了，你要对我负责哦~",
            "今天天气好冷，但是看到你就暖和啦~",
            "我想要吃糖葫芦，你陪我去买好不好？",
            "你说过的话我都记得呢，一句都不能少！",
            "人家害羞了啦，你不要再逗我了~",
            "你的眼睛里好像有星星，一闪一闪的~",
            "我想和你一起数天上的星星，一颗一颗数到天明~",
            "今天的月亮特别圆，就像我对你的思念一样满满当当~"
        ];

        const sweetLove = [
            "遇见你之前，我没想过结婚。遇见你之后，我没想过别人。",
            "我想和你一起慢慢变老，看遍世间所有的风景。",
            "你的笑容是我每天最好的动力，你的温柔是我心中最温暖的港湾。",
            "爱你，是我做过最好的事。陪伴你，是我最幸福的选择。",
            "愿得一人心，白首不相离。愿我们携手走过人生的每一个阶段。",
            "我想和你一起看遍世间的美景，走过山川湖海，踏遍天涯海角。",
            "你是我心中最亮的那颗星，指引着我前进的方向。",
            "我愿意用一生的时间来宠爱你，呵护你，陪伴你。",
            "从遇见你的那一刻起，我的世界就变得不一样了。",
            "你的笑容如阳光般温暖，照亮了我心中的每一个角落。",
            "我想对你说：你是我的唯一，我的宝贝，我的挚爱。",
            "在这个世界上，有千万种相遇，但最美的那一种，就是与你相遇。",
            "我愿意成为你的依靠，在你疲惫时给你肩膀，在你迷茫时为你指引。",
            "时光荏苒，岁月如梭，但我的爱永远不会改变。",
            "你是我生命中最美的意外，最珍贵的礼物。"
        ];

        const comfortMode = [
            "别难过，我会一直陪着你的，不管发生什么。",
            "我知道你现在心情不好，但是没关系，一切都会好起来的。",
            "就算全世界都抛弃了你，我也会站在你这边，永远不离开。",
            "你不是一个人在战斗，我永远是你最坚强的后盾。",
            "生活有时候会给我们出难题，但我相信你能克服它们。",
            "每个人都会有低潮期，但这不代表你不够优秀。",
            "不要因为一时的挫折就否定自己，你的价值不会因此减少。",
            "我在这里，就在你身边，你想哭就哭吧，没关系的。",
            "虽然我不能完全理解你的感受，但我会尽力陪伴你度过难关。",
            "明天又是新的一天，会有新的希望和机会等着我们。",
            "你比你自己想象的更坚强，更勇敢，更有能力面对困难。",
            "让我们一起面对这些问题，好吗？你不需要独自承担所有压力。",
            "我相信你有足够的智慧和力量走出困境，我会一直在你身边支持你。",
            "有时候我们需要停下来休息一下，给自己一些时间和空间。",
            "记住，无论何时何地，你都有我的支持和爱。"
        ];

        const futurePromise = [
            "我会努力成为一个更好的人，配得上你的爱。",
            "我承诺会用一生的时间来珍惜你，爱护你。",
            "无论贫穷还是富有，无论健康还是疾病，我都会陪伴在你身边。",
            "我会努力工作，为我们创造一个温馨幸福的家庭。",
            "我保证会尊重你的梦想，支持你的决定，做你最坚实的依靠。",
            "我会学会更好地沟通，不再让你感到孤单和误解。",
            "我承诺会在你需要的时候给予你支持，在你成功的时候为你骄傲。",
            "我会用心经营我们的感情，让它像美酒一样越陈越香。",
            "我发誓会保护你不受伤害，给你安全感和归属感。",
            "我会和你一起面对生活的挑战，分享彼此的喜怒哀乐。",
            "我承诺会不断学习成长，让自己成为值得你信赖的人。",
            "我会珍惜我们在一起的每一天，不让时间白白流逝。",
            "我保证会让你每天都感受到被爱和被重视的感觉。",
            "我会努力实现我们的共同目标，让我们的未来更加美好。",
            "我发誓会用行动证明我的爱，而不仅仅是言语表达。"
        ];

        const dateIdeas = [
            "一起去公园散步，聊聊彼此的梦想和未来规划。",
            "去看一场浪漫的电影，然后讨论剧情和感受。",
            "亲手为对方做一顿丰盛的晚餐，享受烹饪的乐趣。",
            "一起去海边看日出或者日落，感受大自然的魅力。",
            "参加情侣手工课程，一起制作属于你们的小物件。",
            "去游乐园坐过山车，体验刺激和快乐的感觉。",
            "一起爬山，欣赏山顶的美景和城市的风光。",
            "去博物馆参观展览，增长知识的同时增进感情。",
            "在家一起玩桌游或者电子游戏，享受轻松愉快的时光。",
            "一起去书店买书，然后找个咖啡厅安静地阅读。",
            "参加舞蹈课程，学习一支双人舞作为纪念。",
            "去动物园看看可爱的动物们，找回童心和快乐。",
            "一起学做甜品，品尝自己的劳动成果。",
            "去音乐会听现场演出，感受艺术的魅力。",
            "租一辆双人自行车，环湖骑行享受自然风光。"
        ];

        const memories = [
            "还记得我们第一次见面吗？那时候我就觉得你特别与众不同。",
            "那次我们一起淋雨奔跑的样子，至今还深深印在我脑海里。",
            "你第一次牵我手的时候，我的心跳得好快好快。",
            "我们一起去旅行的那个夏天，是我记忆中最美好的时光。",
            "每次你笑起来的样子，都能瞬间治愈我所有的烦恼。",
            "那些深夜里的长谈，让我更加了解和珍惜你。",
            "你生病时我照顾你的那个晚上，让我意识到你对我有多重要。",
            "我们一起做饭时厨房里的一片狼藉，现在想想都觉得温馨。",
            "那次吵架后的和好，让我们的感情变得更加坚固。",
            "你送给我第一份礼物时的表情，我一直记得很清楚。",
            "我们在雪地里堆雪人的场景，仿佛就在昨天。",
            "你为了陪我熬夜看比赛的样子，真的很感动。",
            "我们一起许下的愿望，我希望都能一一实现。",
            "那些平凡却幸福的日子，是我最珍贵的回忆。",
            "每一次拥抱和亲吻，都让我更加确信我爱你。"
        ];

        const vows = [
            "我承诺会永远对你诚实，不隐瞒任何事情。",
            "我会尊重你的个人空间和独立性，不做束缚你的枷锁。",
            "我发誓会在你需要独处时给你足够的自由和理解。",
            "我承诺会包容你的小脾气和缺点，因为这些都是你的一部分。",
            "我会努力成为你可以完全信任和依赖的人。",
            "我保证会和你分享我的想法和感受，不让你猜测我的心意。",
            "我承诺会支持你的事业和梦想，做你最坚强的后盾。",
            "我会学会更好地表达爱意，让你时刻感受到我的关心。",
            "我发誓会在我们之间建立良好的沟通方式，避免误解和争吵。",
            "我承诺会为我们的关系付出同等的努力和时间。",
            "我会珍惜我们之间的每一个特殊时刻和纪念日。",
            "我保证会用行动而不是仅仅言语来表达我的爱意。",
            "我承诺会和你一起面对生活中的风风雨雨。",
            "我会努力让我们的家充满欢声笑语和温暖氛围。",
            "我发誓会一辈子爱你，珍惜你，直到永远。"
        ];

        const goodnightWishes = [
            "晚安，愿你有个甜甜的梦，梦见我们在一起的快乐时光。",
            "夜深了，早点休息吧，明天醒来又是美好的一天。",
            "闭上眼睛，想象我在你身边，陪你度过这宁静的夜晚。",
            "愿星光守护你的梦境，带给你一夜的好睡眠。",
            "带着我对你的思念入睡吧，我会在梦里与你相见。",
            "晚安宝贝，愿你的梦里全是开心和幸福的事情。",
            "睡吧，我的小可爱，我会一直在这里等你醒来。",
            "愿你的每一个梦境都如诗如画，美丽动人。",
            "今夜月色很美，就像你温柔的眼神一样迷人。",
            "放下一天的疲惫，让心灵在梦乡中得到充分的休息。",
            "愿你今晚没有噩梦，只有美好和温馨的梦境陪伴。",
            "晚安，愿你明天精神饱满，笑容灿烂如花。",
            "在这静谧的夜晚，让我的祝福伴你进入甜美的梦乡。",
            "愿你的心情如这夜空一般宁静祥和，安然入睡。",
            "带着微笑入睡吧，因为你知道有人在远方想念着你。"
        ];

        // 显示随机甜蜜语句弹窗
        function showSweetMessage(messageArray, title = "") {
            const popup = document.getElementById('sweetMessagePopup');
            const messageText = document.getElementById('sweetMessageText');
            const overlay = document.getElementById('popupOverlay');
            
            // 清除之前的定时器
            if (window.popupTimer) {
                clearTimeout(window.popupTimer);
            }
            
            // 如果提供了特定的消息数组，则从中随机选择一条
            if (messageArray && messageArray.length > 0) {
                const randomIndex = Math.floor(Math.random() * messageArray.length);
                messageText.textContent = messageArray[randomIndex];
            } else {
                // 否则使用原有的随机消息
                const allMessages = [...cuteWhisper, ...sweetLove, ...comfortMode, ...futurePromise];
                const randomIndex = Math.floor(Math.random() * allMessages.length);
                messageText.textContent = allMessages[randomIndex];
            }
            
            // 显示弹窗和遮罩
            popup.style.display = 'block';
            overlay.style.display = 'block';
            
            // 5秒后自动关闭弹窗
            window.popupTimer = setTimeout(() => {
                closePopup();
            }, 5000);
        }

        // 关闭弹窗
        function closePopup() {
            const popup = document.getElementById('sweetMessagePopup');
            const overlay = document.getElementById('popupOverlay');
            
            popup.style.display = 'none';
            overlay.style.display = 'none';
        }

        // 添加心形样式数组
        const heartStyles = [
            {color: '#ff66a3', shadow: '0 0 20px #ff66a3'}, // 粉色
            {color: '#ff9900', shadow: '0 0 20px #ff9900'}, // 橙色
            {color: '#ff3399', shadow: '0 0 20px #ff3399'}, // 玫红色
            {color: '#66ccff', shadow: '0 0 20px #66ccff'}, // 蓝色
            {color: '#9966ff', shadow: '0 0 20px #9966ff'}  // 紫色
        ];
        
        let currentHeartStyleIndex = 0;

        // 切换心形样式
        function changeHeartStyle() {
            currentHeartStyleIndex = (currentHeartStyleIndex + 1) % heartStyles.length;
            const heart = document.querySelector('.heart');
            const style = heartStyles[currentHeartStyleIndex];
            
            // 修改心形颜色
            heart.style.filter = `drop-shadow(${style.shadow})`;
            
            // 使用CSS变量来动态改变颜色
            document.documentElement.style.setProperty('--heart-color', style.color);
        }

        // 初始化心形样式
        document.documentElement.style.setProperty('--heart-color', heartStyles[0].color);

        // 页面点击事件（创建烟花和切换背景）
        document.body.addEventListener('click', function(e) {
            // 检查点击的元素是否在按钮区域
            if (!e.target.closest('.button-container') && 
                !e.target.classList.contains('action-button') &&
                e.target.id !== 'sweetMessagePopup' && 
                e.target.id !== 'sweetMessageText' &&
                e.target.id !== 'closePopup') {
                // 切换背景颜色
                currentColorIndex = (currentColorIndex + 1) % backgroundColors.length;
                document.body.style.background = backgroundColors[currentColorIndex];
                
                // 创建烟花特效
                createFireworks(e.clientX, e.clientY);
            }
        });

        // 触摸事件（移动端支持）
        document.body.addEventListener('touchstart', function(e) {
            if (e.touches.length > 0) {
                const touch = e.touches[0];
                
                // 切换背景颜色
                currentColorIndex = (currentColorIndex + 1) % backgroundColors.length;
                document.body.style.background = backgroundColors[currentColorIndex];
                
                // 创建烟花特效
                createFireworks(touch.clientX, touch.clientY);
            }
        });

        // 音乐播放列表
        const musicList = [
            {url: "https://music.163.com/song/media/outer/url?id=139774.mp3", title: "告白气球"},
            {url: "https://music.163.com/song/media/outer/url?id=461523.mp3", title: "简单爱"},
            {url: "https://music.163.com/song/media/outer/url?id=287438.mp3", title: "稻香"},
            {url: "https://music.163.com/song/media/outer/url?id=28407983.mp3", title: "小幸运"},
            {url: "https://music.163.com/song/media/outer/url?id=28285928.mp3", title: "后来"},
            {url: "https://music.163.com/song/media/outer/url?id=26625879.mp3", title: "落叶归根"}
        ];

        let currentSongIndex = 0;

        // 播放音乐
        function playMusic() {
            const music = document.getElementById('backgroundMusic');
            const button = document.getElementById('playMusicBtn');
            
            // 设置当前歌曲源
            const source = music.querySelector('source');
            source.src = musicList[currentSongIndex].url;
            music.load();
            
            music.play().then(() => {
                button.innerHTML = `⏸️ ${musicList[currentSongIndex].title}`;
            }).catch(e => {
                console.log('音乐自动播放失败，请手动点击播放按钮:', e);
                button.innerHTML = `🎵 播放音乐 (${currentSongIndex + 1}/${musicList.length})`;
            });
        }

        // 暂停音乐
        function pauseMusic() {
            const music = document.getElementById('backgroundMusic');
            const button = document.getElementById('playMusicBtn');
            
            music.pause();
            button.innerHTML = `🎵 播放音乐 (${currentSongIndex + 1}/${musicList.length})`;
        }

        // 下一首音乐
        function nextSong() {
            currentSongIndex = (currentSongIndex + 1) % musicList.length;
            const music = document.getElementById('backgroundMusic');
            const playButton = document.getElementById('playMusicBtn');
            
            // 更新音乐源
            const source = music.querySelector('source');
            source.src = musicList[currentSongIndex].url;
            music.load();
            
            // 如果音乐正在播放，则继续播放
            if (!music.paused) {
                music.play().then(() => {
                    playButton.innerHTML = `⏸️ ${musicList[currentSongIndex].title}`;
                }).catch(e => {
                    console.log('音乐播放失败:', e);
                    playButton.innerHTML = `🎵 播放音乐 (${currentSongIndex + 1}/${musicList.length})`;
                });
            } else {
                playButton.innerHTML = `🎵 播放音乐 (${currentSongIndex + 1}/${musicList.length})`;
            }
            
            // 更新下一首按钮文本
            const nextButton = document.getElementById('nextSongBtn');
            nextButton.innerHTML = `🎵 下一首 (${currentSongIndex + 1}/${musicList.length})`;
            
            // 强制播放下一首
            music.play().then(() => {
                playButton.innerHTML = `⏸️ ${musicList[currentSongIndex].title}`;
            }).catch(e => {
                console.log('音乐播放失败:', e);
                playButton.innerHTML = `🎵 播放音乐 (${currentSongIndex + 1}/${musicList.length})`;
            });
        }

        // 静音切换
        function toggleMute() {
            const music = document.getElementById('backgroundMusic');
            const button = document.getElementById('muteBtn');
            
            music.muted = !music.muted;
            button.innerHTML = music.muted ? '🔊 取消静音' : '🔇 静音';
        }

        // 绑定按钮事件
        document.getElementById('missYouBtn').addEventListener('click', () => showSweetMessage(sweetLove, "想你"));
        document.getElementById('coaxBtn').addEventListener('click', () => showSweetMessage(comfortMode, "哄哄模式"));
        document.getElementById('complimentBtn').addEventListener('click', () => showSweetMessage(sweetLove, "夸夸你"));
        document.getElementById('whisperBtn').addEventListener('click', () => showSweetMessage(cuteWhisper, "撒娇"));
        document.getElementById('dateBtn').addEventListener('click', () => showSweetMessage(dateIdeas, "约会提议"));
        document.getElementById('promiseBtn').addEventListener('click', () => showSweetMessage(futurePromise, "认真一点"));
        document.getElementById('memoryBtn').addEventListener('click', () => showSweetMessage(memories, "回忆瞬间"));
        document.getElementById('vowBtn').addEventListener('click', () => showSweetMessage(vows, "小誓言"));
        document.getElementById('goodnightBtn').addEventListener('click', () => showSweetMessage(goodnightWishes, "晚安情话"));
        document.getElementById('nextSongBtn').addEventListener('click', nextSong);
        document.getElementById('muteBtn').addEventListener('click', toggleMute);
        document.getElementById('fireworksBtn').addEventListener('click', () => {
            // 在屏幕中心触发烟花
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            createFireworks(centerX, centerY);
        });
        document.getElementById('randomMsgBtn').addEventListener('click', () => showSweetMessage());
        document.getElementById('hugBtn').addEventListener('click', () => showSweetMessage(cuteWhisper, "抱抱我"));
        document.getElementById('drinkBtn').addEventListener('click', () => showSweetMessage(goodnightWishes, "多喝水"));
        document.getElementById('kissBtn').addEventListener('click', () => showSweetMessage(cuteWhisper, "亲亲你"));
        document.getElementById('movieBtn').addEventListener('click', () => showSweetMessage(dateIdeas, "一起看电影"));
        document.getElementById('travelBtn').addEventListener('click', () => showSweetMessage(dateIdeas, "去旅行"));
        document.getElementById('giftBtn').addEventListener('click', () => showSweetMessage(sweetLove, "送礼物"));
        document.getElementById('futureBtn').addEventListener('click', () => showSweetMessage(futurePromise, "展望未来"));
        document.getElementById('changeHeartBtn').addEventListener('click', changeHeartStyle);
        
        document.getElementById('playMusicBtn').addEventListener('click', function() {
            const music = document.getElementById('backgroundMusic');
            const button = document.getElementById('playMusicBtn');
            
            if (music.paused) {
                playMusic();
            } else {
                pauseMusic();
            }
        });

        // 弹窗关闭事件
        document.getElementById('closePopup').addEventListener('click', closePopup);
        document.getElementById('popupOverlay').addEventListener('click', closePopup);

        // 全屏光晕层跟随鼠标
        function initCursorGlow() {
            const cursorGlow = document.getElementById('cursorGlow');
            let mouseX = 0;
            let mouseY = 0;
            let glowX = 0;
            let glowY = 0;
            
            // 鼠标移动事件
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            // 触摸移动事件（移动端支持）
            document.addEventListener('touchmove', (e) => {
                if (e.touches.length > 0) {
                    mouseX = e.touches[0].clientX;
                    mouseY = e.touches[0].clientY;
                }
            });
            
            // 动画循环，实现缓动效果
            function animateGlow() {
                // 缓动计算
                glowX += (mouseX - glowX) * 0.1;
                glowY += (mouseY - glowY) * 0.1;
                
                // 更新光晕位置
                cursorGlow.style.transform = `translate3d(${glowX - 200}px, ${glowY - 200}px, 0)`;
                
                requestAnimationFrame(animateGlow);
            }
            
            animateGlow();
        }

        // 快捷键支持（按F键触发烟花）
        document.addEventListener('keydown', (e) => {
            if (e.key === 'F' || e.key === 'f') {
                // 在屏幕中心触发烟花
                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;
                createFireworks(centerX, centerY);
            }
        });

        // 设置按钮随机位置
        function setRandomButtonPositions() {
            const buttons = document.querySelectorAll('.action-button');
            buttons.forEach((button, index) => {
                // 为每个按钮设置随机位置（避免过于靠近边缘）
                const top = Math.random() * 80 + 10; // 10% 到 90% 之间
                const left = Math.random() * 80 + 10; // 10% 到 90% 之间
                button.style.top = `${top}%`;
                button.style.left = `${left}%`;
            });
        }

        // 窗口大小改变时重新设置按钮位置
        window.addEventListener('resize', () => {
            setRandomButtonPositions();
        });

        // 页面加载完成后执行
        window.addEventListener('load', () => {
            createFloatingHearts();
            createParticleEffect();
            generateShareLink();
            createStars(); // 创建星星背景
            createRibbons(); // 创建彩带背景
            createPetals(); // 创建花瓣背景
            createClouds(); // 创建云朵背景
            initCursorGlow(); // 初始化光晕效果
            
            // 设置按钮随机位置
            setRandomButtonPositions();
            
            // 尝试自动播放音乐（大多数浏览器会阻止）
            const music = document.getElementById('backgroundMusic');
            music.volume = 0.3; // 设置音量为30%
            
            // 初始化按钮文本
            const playButton = document.getElementById('playMusicBtn');
            playButton.innerHTML = `🎵 播放音乐 (1/${musicList.length})`;
            
            const nextButton = document.getElementById('nextSongBtn');
            nextButton.innerHTML = `🎵 下一首 (1/${musicList.length})`;
        });
    </script>
</body>
</html>